<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Order</title>
</head>
<body>
<div th:insert="~{fragment :: header}"></div>
<form th:action="@{/orders/{orderId}(orderId=${order.id})}" method="post" th:object="${order}">
  <label for="city">City:
    <input id="city" type="text" name="city" th:value="*{city}">
  </label><br>
  <label for="street">Street:
    <input id="street" type="text" name="street" th:value="*{street}">
  </label><br>
  <label for="building">Building:
    <input id="building" type="number" name="building" th:value="*{building}">
  </label><br>
  <label for="deliveryDate">DeliveryDate:
    <input id="deliveryDate" type="date" name="deliveryDate" th:value="*{deliveryDate}">
  </label><br>
  <label for="userId">User id:
    <input id="userId" type="text" readonly name="userId" th:value="${userid}">
  </label><br>
  <label for="status">Status
    <input id="status" type="text" readonly name="status" th:value="${order.status.name()}">
  </label>
  <div th:each="paymentCondition : ${payments}">
    <input th:id="${paymentCondition}" type="radio" name="paymentCondition" th:value="${paymentCondition}" th:checked="${paymentCondition == order.paymentCondition}">
    <label th:for="${paymentCondition}" th:text="${paymentCondition}">Role name</label>
  </div>
<!--  <div>-->
<!--    <label for="user">User:-->
<!--        <select id="user" name="userId">-->
<!--          <option th:each="user : ${users}"-->
<!--                  th:value="${user.getId()}"-->
<!--                  th:selected="${user.getId() == order.getUser().getId()}"-->
<!--          th:text="${user.lastName}">User</option>-->
<!--        </select>-->
<!--    </label>-->
<!--  </div>-->
  <button type="submit">Update</button><br>
</form>

<div th:each="shoppingcart : ${shoppingcarts}">Товары:
  <a th:text="|id: ${shoppingcart.id}. category: ${shoppingcart.product.catalog.category}|">shoppingcart</a>
  <form th:action="@{/shoppingcarts/{shid}/delete(shid=${shoppingcart.id})}" th:if="${order.status.name() == 'IN_PROGRESS'}" method="post">
    <button type="submit">Remove product</button>
  </form>
</div>
<form th:action="@{/orders/{orderId}/setStatus(orderId=${order.id})}" th:if="${order.status.name() == 'IN_PROGRESS'}" method="post">
  <button type="submit">Confirm</button>
</form><br>
<form th:action="@{/orders/{orderId}/delete(orderId=${order.id})}" method="post">
  <button type="submit">Remove order</button>
</form>
<div th:insert="~{fragment :: footer}"></div>
</body>
</html>